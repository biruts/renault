"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var elems={},STICKY_CLASS="is-sticky",STICKY_ATTR="__sticky",id=0,getScrollPosition=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}},makeSticky=function(e,t){return e[STICKY_ATTR]=id,elems[id]={elem:e,style:t,defaultRect:{top:e.getBoundingClientRect().top+getScrollPosition().top}},id++,e},toSticky=function(e){var t=elems[e],i=t.elem,l=t.style;i.classList.add(STICKY_CLASS);var s=i.cloneNode(!0);elems[e].defaultVisibility=i.style.visibility,elems[e].defaultOpacity=i.style.opacity,elems[e].clone=s,i.style.visibility="hidden",i.style.opacity=0,l&&Object.keys(l).forEach(function(e){s.style[e]=l[e]}),s.style.position="fixed",s.style.top=0,i.parentNode.insertBefore(s,i)},toUnsticky=function(e){var t=elems[e],i=t.elem,l=t.clone,s=t.defaultVisibility,n=t.defaultOpacity;i.classList.remove(STICKY_CLASS),i.style.visibility=s,i.style.opacity=n,l.parentNode.removeChild(l)},listener={init:function(){window.addEventListener("scroll",listener.onScroll,!1)},stop:function(){window.removeEventListener("scroll",listener.onScroll,!1)},onScroll:function(){var e=getScrollPosition();Object.keys(elems).forEach(function(t){var i=elems[t],l=i.defaultRect.top,s=i.elem;l<=e.top?!1===s.classList.contains(STICKY_CLASS)&&toSticky(t):s.classList.contains(STICKY_CLASS)&&toUnsticky(t)})}},Sticky={sticky:function(e,t){if(e&&"number"!=typeof e[STICKY_ATTR])return 0===Object.keys(elems).length&&listener.init(),makeSticky(e,t)},unsticky:function(e){var t=e&&e[STICKY_ATTR];if(e&&void 0!==elems[t])return delete elems[t],delete e[STICKY_ATTR],0===Object.keys(elems).length&&listener.stop(),e},unstickyAll:function(){Object.keys(elems).forEach(function(e){return Sticky.unsticky(elems[e].elem)})},all:function(){return Object.keys(elems).map(function(e){return elems[e].elem})}},sticky=Sticky.sticky,unsticky=Sticky.unsticky,unstickyAll=Sticky.unstickyAll,all=Sticky.all;exports.sticky=sticky,exports.unsticky=unsticky,exports.unstickyAll=unstickyAll,exports.all=all;